<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’æ—¥å¿— - æ™ºèƒ½è½¦è½½AIåŠ©æ‰‹</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="glass-header">
        <div class="container">
            <h1 class="main-title">äº¤äº’æ—¥å¿—åˆ†æ</h1>
        </div>
    </header>
    
    <nav class="glass-nav">
        <div class="container">
            <ul class="nav-list">
                <li><a href="{{ url_for('index') }}" class="nav-link">é¦–é¡µ</a></li>
                <li><a href="{{ url_for('system_bp.logs') }}" class="nav-link active">äº¤äº’æ—¥å¿—</a></li>
                <li><a href="{{ url_for('auth.logout') }}" class="nav-link">é€€å‡ºç™»å½•</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <!-- ç»Ÿè®¡æ¦‚è§ˆå¡ç‰‡ -->
        <div class="stats-overview glass-card fade-in">
            <h2 class="section-title">ç»Ÿè®¡æ¦‚è§ˆ</h2>
            <div class="stats-grid" id="stats-grid">
                <div class="stat-card voice">
                    <div class="stat-icon">ğŸ¤</div>
                    <div class="stat-content">
                        <h3>è¯­éŸ³äº¤äº’</h3>
                        <div class="stat-number" id="voice-count">{{ stats.voice_count }}</div>
                        <div class="stat-label">æ¬¡</div>
                    </div>
                </div>
                
                <div class="stat-card gesture">
                    <div class="stat-icon">ğŸ‘‹</div>
                    <div class="stat-content">
                        <h3>æ‰‹åŠ¿äº¤äº’</h3>
                        <div class="stat-number" id="gesture-count">{{ stats.gesture_count }}</div>
                        <div class="stat-label">æ¬¡</div>
                    </div>
                </div>
                
                <div class="stat-card visual">
                    <div class="stat-icon">ğŸ‘ï¸</div>
                    <div class="stat-content">
                        <h3>è§†è§‰äº¤äº’</h3>
                        <div class="stat-number" id="visual-count">{{ stats.visual_count }}</div>
                        <div class="stat-label">æ¬¡</div>
                    </div>
                </div>
                
                <div class="stat-card system">
                    <div class="stat-icon">âš™ï¸</div>
                    <div class="stat-content">
                        <h3>ç³»ç»Ÿäº‹ä»¶</h3>
                        <div class="stat-number" id="system-count">{{ stats.system_count or 0 }}</div>
                        <div class="stat-label">æ¬¡</div>
                    </div>
                </div>
                
                <div class="stat-card total">
                    <div class="stat-icon">ğŸ“Š</div>
                    <div class="stat-content">
                        <h3>æ€»äº¤äº’æ•°</h3>
                        <div class="stat-number" id="total-count">{{ stats.total }}</div>
                        <div class="stat-label">æ¬¡</div>
                    </div>
                </div>
                
                <div class="stat-card success-rate">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-content">
                        <h3>æˆåŠŸç‡</h3>
                        <div class="stat-number" id="success-rate">{{ stats.success_rate }}%</div>
                        <div class="stat-label">å‡†ç¡®åº¦</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ—¥å¿—è¡¨æ ¼ -->
        <div class="logs-container glass-card fade-in">
            <div class="logs-header">
                <h2 class="section-title">è¯¦ç»†æ—¥å¿—è®°å½•</h2>
                <div class="logs-controls">
                    <button class="btn btn-primary" onclick="refreshLogs()">
                        <span id="refresh-text">åˆ·æ–°æ—¥å¿—</span>
                    </button>
                    <button class="btn btn-success" onclick="exportLogs()">å¯¼å‡ºCSV</button>
                    <select class="filter-select" onchange="filterLogs(this.value)" id="type-filter">
                        <option value="all">å…¨éƒ¨ç±»å‹</option>
                        <option value="voice">è¯­éŸ³äº¤äº’</option>
                        <option value="gesture">æ‰‹åŠ¿äº¤äº’</option>
                        <option value="visual">è§†è§‰äº¤äº’</option>
                        <option value="system">ç³»ç»Ÿäº‹ä»¶</option>
                    </select>
                    <label class="auto-refresh-label">
                        <input type="checkbox" id="auto-refresh" onchange="toggleAutoRefresh()">
                        è‡ªåŠ¨åˆ·æ–° (<span id="countdown">30</span>s)
                    </label>
                </div>
            </div>
            
            <div class="loading-indicator" id="loading-indicator" style="display: none;">
                <div class="loading-spinner"></div>
                <span>æ­£åœ¨åŠ è½½...</span>
            </div>
            
            {% if logs %}
                <div class="table-container">
                    <table id="logs-table" class="logs-table">
                        <thead>
                            <tr>
                                <th>ç±»å‹</th>
                                <th>åŠ¨ä½œ</th>
                                <th>çŠ¶æ€</th>
                                <th>è¯¦æƒ…</th>
                                <th>æ—¶é—´</th>
                            </tr>
                        </thead>
                        <tbody id="logs-tbody">
                            {% for log in logs %}
                            <tr class="log-row" data-type="{{ log.interaction_type }}">
                                <td>
                                    <span class="interaction-badge {{ log.interaction_type }}">
                                        {% if log.interaction_type == 'voice' %}
                                            ğŸ¤ è¯­éŸ³
                                        {% elif log.interaction_type == 'gesture' %}
                                            ğŸ‘‹ æ‰‹åŠ¿
                                        {% elif log.interaction_type == 'visual' %}
                                            ğŸ‘ï¸ è§†è§‰
                                        {% elif log.interaction_type == 'system' %}
                                            âš™ï¸ ç³»ç»Ÿ
                                        {% else %}
                                            ğŸ”§ å…¶ä»–
                                        {% endif %}
                                    </span>
                                </td>
                                <td class="action-cell">{{ log.action }}</td>
                                <td>
                                    {% if log.success %}
                                        <span class="status-badge success">âœ… æˆåŠŸ</span>
                                    {% else %}
                                        <span class="status-badge failure">âŒ å¤±è´¥</span>
                                    {% endif %}
                                </td>
                                <td class="details-cell">
                                    <div class="details-preview" title="{{ log.details or 'æ— è¯¦æƒ…' }}">
                                        {{ log.details or 'æ— è¯¦æƒ…' }}
                                    </div>
                                </td>
                                <td class="time-cell">
                                    {{ log.created_at | datetime_format }}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                
                <!-- åˆ†é¡µæ§åˆ¶ -->
                <div class="pagination-container">
                    <button class="btn btn-secondary" onclick="previousPage()" id="prev-btn">ä¸Šä¸€é¡µ</button>
                    <span class="page-info" id="page-info">ç¬¬ 1 é¡µï¼Œå…± {{ (logs|length / 10)|round|int + 1 }} é¡µ</span>
                    <button class="btn btn-secondary" onclick="nextPage()" id="next-btn">ä¸‹ä¸€é¡µ</button>
                </div>
            {% else %}
                <div class="empty-state">
                    <div class="empty-icon">ğŸ“</div>
                    <h3>æš‚æ— äº¤äº’æ—¥å¿—</h3>
                    <p>å¼€å§‹ä½¿ç”¨ç³»ç»Ÿåï¼Œäº¤äº’è®°å½•å°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                    <a href="{{ url_for('index') }}" class="btn btn-primary">å¼€å§‹ä½¿ç”¨</a>
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        let currentPage = 1;
        const rowsPerPage = 10;
        let filteredRows = [];
        let autoRefreshInterval = null;
        let countdown = 30;
        let countdownInterval = null;
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeLogs();
            // æ£€æŸ¥æ˜¯å¦éœ€è¦è‡ªåŠ¨åˆ·æ–°
            const autoRefreshCheckbox = document.getElementById('auto-refresh');
            if (autoRefreshCheckbox.checked) {
                startAutoRefresh();
            }
        });
        
        // åˆå§‹åŒ–æ—¥å¿—é¡µé¢
        function initializeLogs() {
            updatePagination();
            showNotification('æ—¥å¿—æ•°æ®å·²åŠ è½½', 'success', 2000);
        }
        
        // åˆ·æ–°æ—¥å¿—
        function refreshLogs() {
            const refreshBtn = document.querySelector('[onclick="refreshLogs()"]');
            const refreshText = document.getElementById('refresh-text');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            refreshBtn.disabled = true;
            refreshText.textContent = 'åˆ·æ–°ä¸­...';
            loadingIndicator.style.display = 'flex';
            
            fetch('{{ url_for("system_bp.refresh_logs") }}')
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    updateLogsTable(data.logs);
                    updateStats(data.stats);
                    showNotification('æ—¥å¿—å·²æ›´æ–°', 'success', 2000);
                } else {
                    throw new Error(data.error || 'åˆ·æ–°å¤±è´¥');
                }
            })
            .catch(error => {
                console.error('åˆ·æ–°æ—¥å¿—æ—¶å‡ºé”™:', error);
                showNotification('åˆ·æ–°å¤±è´¥: ' + error.message, 'error');
            })
            .finally(() => {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                refreshBtn.disabled = false;
                refreshText.textContent = 'åˆ·æ–°æ—¥å¿—';
                loadingIndicator.style.display = 'none';
            });
        }
        
        // æ›´æ–°æ—¥å¿—è¡¨æ ¼
        function updateLogsTable(logs) {
            const tbody = document.getElementById('logs-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            logs.forEach(log => {
                const row = createLogRow(log);
                tbody.appendChild(row);
            });
            
            // é‡æ–°åº”ç”¨ç­›é€‰
            const currentFilter = document.getElementById('type-filter').value;
            if (currentFilter !== 'all') {
                filterLogs(currentFilter);
            }
            
            // æ›´æ–°åˆ†é¡µ
            currentPage = 1;
            updatePagination();
        }
        
        // åˆ›å»ºæ—¥å¿—è¡Œ
        function createLogRow(log) {
            const row = document.createElement('tr');
            row.className = 'log-row';
            row.setAttribute('data-type', log.interaction_type);
            
            // è·å–äº¤äº’ç±»å‹æ˜¾ç¤º
            let typeDisplay = 'ğŸ”§ å…¶ä»–';
            switch(log.interaction_type) {
                case 'voice': typeDisplay = 'ğŸ¤ è¯­éŸ³'; break;
                case 'gesture': typeDisplay = 'ğŸ‘‹ æ‰‹åŠ¿'; break;
                case 'visual': typeDisplay = 'ğŸ‘ï¸ è§†è§‰'; break;
                case 'system': typeDisplay = 'âš™ï¸ ç³»ç»Ÿ'; break;
            }
            
            const statusBadge = log.success ? 
                '<span class="status-badge success">âœ… æˆåŠŸ</span>' : 
                '<span class="status-badge failure">âŒ å¤±è´¥</span>';
            
            row.innerHTML = `
                <td>
                    <span class="interaction-badge ${log.interaction_type}">
                        ${typeDisplay}
                    </span>
                </td>
                <td class="action-cell">${log.action}</td>
                <td>${statusBadge}</td>
                <td class="details-cell">
                    <div class="details-preview" title="${log.details || 'æ— è¯¦æƒ…'}">
                        ${log.details || 'æ— è¯¦æƒ…'}
                    </div>
                </td>
                <td class="time-cell">${formatDateTime(log.created_at)}</td>
            `;
            
            return row;
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
        function formatDateTime(dateString) {
            try {
                const date = new Date(dateString);
                return date.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            } catch (e) {
                return dateString || 'æœªçŸ¥æ—¶é—´';
            }
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats(stats) {
            document.getElementById('voice-count').textContent = stats.voice_count;
            document.getElementById('gesture-count').textContent = stats.gesture_count;
            document.getElementById('visual-count').textContent = stats.visual_count;
            document.getElementById('system-count').textContent = stats.system_count || 0;
            document.getElementById('total-count').textContent = stats.total;
            document.getElementById('success-rate').textContent = stats.success_rate + '%';
        }
        
        // å¯¼å‡ºæ—¥å¿—
        function exportLogs() {
            const table = document.getElementById('logs-table');
            if (!table) return;
            
            let csv = '';
            const headers = Array.from(table.querySelectorAll('thead th')).map(th => th.textContent.trim());
            csv += headers.join(',') + '\n';
            
            const rows = Array.from(table.querySelectorAll('tbody tr:not([style*="display: none"])'));
            rows.forEach(row => {
                const cells = Array.from(row.querySelectorAll('td')).map(td => {
                    return '"' + td.textContent.trim().replace(/"/g, '""') + '"';
                });
                csv += cells.join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `äº¤äº’æ—¥å¿—_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showNotification('æ—¥å¿—å¯¼å‡ºæˆåŠŸ', 'success');
        }
        
        // ç­›é€‰æ—¥å¿—
        function filterLogs(type) {
            const rows = document.querySelectorAll('.log-row');
            filteredRows = [];
            
            rows.forEach(row => {
                if (type === 'all' || row.dataset.type === type) {
                    filteredRows.push(row);
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            
            currentPage = 1;
            updatePagination();
            
            const filterText = type === 'all' ? 'å…¨éƒ¨æ—¥å¿—' : 
                              type === 'voice' ? 'è¯­éŸ³æ—¥å¿—' : 
                              type === 'gesture' ? 'æ‰‹åŠ¿æ—¥å¿—' : 
                              type === 'visual' ? 'è§†è§‰æ—¥å¿—' : 'ç³»ç»Ÿæ—¥å¿—';
            showNotification(`å·²ç­›é€‰: ${filterText}`, 'info', 2000);
        }
        
        // è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½
        function toggleAutoRefresh() {
            const checkbox = document.getElementById('auto-refresh');
            if (checkbox.checked) {
                startAutoRefresh();
            } else {
                stopAutoRefresh();
            }
        }
        
        function startAutoRefresh() {
            stopAutoRefresh(); // ç¡®ä¿æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            
            countdown = 30;
            updateCountdown();
            
            // å€’è®¡æ—¶
            countdownInterval = setInterval(() => {
                countdown--;
                updateCountdown();
                
                if (countdown <= 0) {
                    refreshLogs();
                    countdown = 30;
                }
            }, 1000);
        }
        
        function stopAutoRefresh() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            document.getElementById('countdown').textContent = '30';
        }
        
        function updateCountdown() {
            document.getElementById('countdown').textContent = countdown;
        }
        
        // æ›´æ–°åˆ†é¡µ
        function updatePagination() {
            const visibleRows = filteredRows.length > 0 ? filteredRows : document.querySelectorAll('.log-row:not([style*="display: none"])');
            const totalPages = Math.ceil(visibleRows.length / rowsPerPage);
            
            // æ˜¾ç¤ºå½“å‰é¡µçš„è¡Œ
            visibleRows.forEach((row, index) => {
                const pageNumber = Math.floor(index / rowsPerPage) + 1;
                if (pageNumber === currentPage) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            
            // æ›´æ–°åˆ†é¡µæ§ä»¶
            const pageInfo = document.getElementById('page-info');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            if (pageInfo) {
                pageInfo.textContent = `ç¬¬ ${currentPage} é¡µï¼Œå…± ${totalPages} é¡µ`;
            }
            
            if (prevBtn) {
                prevBtn.disabled = currentPage === 1;
            }
            
            if (nextBtn) {
                nextBtn.disabled = currentPage === totalPages || totalPages === 0;
            }
        }
        
        // ä¸Šä¸€é¡µ
        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePagination();
            }
        }
        
        // ä¸‹ä¸€é¡µ
        function nextPage() {
            const visibleRows = filteredRows.length > 0 ? filteredRows : document.querySelectorAll('.log-row:not([style*="display: none"])');
            const totalPages = Math.ceil(visibleRows.length / rowsPerPage);
            
            if (currentPage < totalPages) {
                currentPage++;
                updatePagination();
            }
        }
        
        // é€šçŸ¥å‡½æ•°
        function showNotification(message, type = 'info', duration = 3000) {
            // åˆ›å»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 10000;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 500;
                max-width: 400px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            // è®¾ç½®èƒŒæ™¯é¢œè‰²
            switch (type) {
                case 'success':
                    notification.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                    break;
                case 'warning':
                    notification.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                    break;
                default:
                    notification.style.background = 'linear-gradient(135deg, #3b82f6, #2563eb)';
            }
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: 15px;">Ã—</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // è‡ªåŠ¨å…³é—­
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }
            }, duration);
        }
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
        window.addEventListener('beforeunload', function() {
            stopAutoRefresh();
        });
    </script>

    <style>
        /* CSSå˜é‡å®šä¹‰ - ç¡®ä¿é¢œè‰²ä¸€è‡´æ€§ */
        :root {
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --secondary-color: #8b5cf6;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-muted: #9ca3af;
            --bg-primary: #f9fafb;
            --bg-secondary: #ffffff;
            --border-color: #e5e7eb;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.37);
            --backdrop-blur: blur(4px);
        }
        /* ç»Ÿè®¡æ¦‚è§ˆæ ·å¼ */
        .stats-overview {
            padding: 30px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            /* é»˜è®¤ï¼šè¶…å¤§å±å¹•6åˆ—ï¼ˆä¸€è¡Œæ˜¾ç¤ºæ‰€æœ‰ï¼‰ */
            grid-template-columns: repeat(6, 1fr);
        }

        /* å¤§å±å¹•ï¼š3åˆ—2è¡Œ */
        @media (max-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                max-width: 900px;
            }
        }

        /* ä¸­ç­‰å±å¹•ï¼š2åˆ—3è¡Œ */
        @media (max-width: 900px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 600px;
            }
        }

        /* å°å±å¹•ï¼š1åˆ—6è¡Œ */
        @media (max-width: 600px) {
            .stats-grid {
                grid-template-columns: 1fr;
                max-width: 350px;
            }
        }

        /* å¹³æ¿æ¨ªå±ä¼˜åŒ–ï¼šç¡®ä¿3åˆ—å¸ƒå±€åœ¨åˆé€‚çš„å°ºå¯¸ä¸‹å·¥ä½œ */
        @media (min-width: 768px) and (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                max-width: 750px;
            }
        }

        .stat-card {
            background: linear-gradient(135deg, var(--glass-bg), rgba(255, 255, 255, 0.1));
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: inherit;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card.voice {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
        }

        .stat-card.gesture {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
        }

        .stat-card.visual {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
        }

        .stat-card.system {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            color: white;
        }

        .stat-card.total {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .stat-card.success-rate {
            background: linear-gradient(135deg, #55a3ff 0%, #003d82 100%);
            color: white;
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .stat-content h3 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 4px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: 500;
        }

        /* æ—¥å¿—å®¹å™¨æ ·å¼ */
        .logs-container {
            padding: 30px;
        }

        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logs-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            font-size: 1rem;
            cursor: pointer;
            color: var(--text-primary);
        }

        .auto-refresh-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .auto-refresh-label input[type="checkbox"] {
            margin: 0;
        }

        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            color: var(--text-secondary);
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-muted);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            max-height: 600px;
            overflow-y: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .logs-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
        }

        .logs-table th {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logs-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            color: #2d3748;
            font-weight: 500;
        }

        .action-cell {
            color: #1a202c;
            font-weight: 600;
        }

        .details-cell {
            color: #4a5568;
        }

        .time-cell {
            color: #2d3748;
            font-weight: 500;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
        }

        .log-row {
            transition: all 0.3s ease;
            cursor: pointer;
            background: #ffffff;
        }

        .log-row:hover {
            background: rgba(99, 102, 241, 0.08);
            transform: scale(1.01);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .log-row:hover .action-cell,
        .log-row:hover .time-cell {
            color: #1a202c;
        }

        .log-row:hover .details-preview {
            color: #2d3748;
            background: rgba(255, 255, 255, 0.8);
        }

        .interaction-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            color: white;
        }

        .interaction-badge.voice {
            background: linear-gradient(135deg, #fd79a8, #e84393);
        }

        .interaction-badge.gesture {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }

        .interaction-badge.visual {
            background: linear-gradient(135deg, #00b894, #00a085);
        }

        .interaction-badge.system {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-badge.success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .status-badge.failure {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .details-preview {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            cursor: help;
            color: #4a5568;
            font-size: 0.95rem;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .details-preview:hover {
            background: rgba(0, 0, 0, 0.05);
            color: #2d3748;
        }

        /* åˆ†é¡µæ ·å¼ */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
        }

        .page-info {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ç©ºçŠ¶æ€æ ·å¼ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .empty-state p {
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .logs-header {
                flex-direction: column;
                align-items: stretch;
            }

            .logs-controls {
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .table-container {
                font-size: 0.9rem;
            }

            .details-preview {
                max-width: 120px;
            }

            .logs-table th,
            .logs-table td {
                padding: 10px 8px;
            }
        }
    </style>
</body>
</html>